<!DOCTYPE html>
<html lang="ru">
    <head>
        <meta charset="utf-8">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="msapplication-TileColor" content="#000">
        <meta name="theme-color" content="#ffffff">
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-gH2yIJqKdNHPEq0n4Mqa/HGKIhSkIHeL5AyhkYV8i59U5AR6csBvApHHNl/vI1Bx" crossorigin="anonymous">
        <title>Тестирование</title>
    </head>
    <body>

        <script>
            let form = document.createElement("form")

            let loginDiv = document.createElement("div")
            loginDiv.classList.add("mb-3")
            let loginLabel = document.createElement("label")
            loginLabel.classList.add("form-label")
            loginLabel.for = "loginInput1"
            loginLabel.textContent = "Имя пользователя"
            let loginInput = document.createElement("input")
            loginInput.classList.add("form-control")
            loginInput.id = "loginInput1"
            loginInput.setAttribute("aria-describedby", "loginHelp")
            loginInput.required = true
            let loginHelp = document.createElement("div")
            loginHelp.id = "loginHelp"
            loginHelp.classList.add("form-text")
            loginHelp.textContent = "Регистрации в проекте не существует, добавление юзеров только через базу данных"
            let passDiv = document.createElement("div")
            passDiv.classList.add("mb-3")
            let passLabel = document.createElement("label")
            passLabel.for = "inputPassword1"
            passLabel.classList.add("form-label")
            passLabel.textContent = "Пароль"
            let passInput = document.createElement("input")
            passInput.id = "inputPassword1"
            passInput.classList.add("form-control")
            passInput.type = "password"
            passInput.required = true

            let button = document.createElement("button")
            button.type = "submit"
            button.classList.add("btn")
            button.classList.add("btn-primary")
            button.textContent = "Войти"

            loginDiv.append(loginLabel)
            loginDiv.append(loginInput)
            loginDiv.append(loginHelp)

            form.append(loginDiv)

            passDiv.append(passLabel)
            passDiv.append(passInput)

            form.append(passDiv)

            form.append(button)

            document.body.append(form)


            form.addEventListener("submit", function (event) {
                event.preventDefault();
       
                data = JSON.stringify({
                    "login": loginInput.value,
                    "password": passInput.value
                });

                fetch("/api/login/", {
                    method: "post",
                    body: data,
                    headers: {
                        "Content-Type": "application/json; charset=utf-8"
                    }
                }).then(function (resp) {
                    window.location.replace("/")
                });
            });
        </script>
    <script src="https://cdn.jsdelivr.net/npm/@popperjs/core@2.11.5/dist/umd/popper.min.js" integrity="sha384-Xe+8cL9oJa6tN/veChSP7q+mnSPaj5Bcu9mPX5F5xIGE0DVittaqT5lorf0EI7Vk" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.0/dist/js/bootstrap.min.js" integrity="sha384-ODmDIVzN+pFdexxHEHFBQH3/9/vQ9uori45z4JjnFsRydbmQbmL5t1tQ0culUzyK" crossorigin="anonymous"></script>
    </body>
</html>